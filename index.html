<!DOCTYPE html>
<html lang="id" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tangsky market | Premium Digital Services</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            utama: '#f43f5e',
            sekunder: '#3b82f6',
            gelap: '#0f172a',
            kartuGelap: '#1e293b',
            hijau: '#10b981',
            ungu: '#8b5cf6',
            kuning: '#f59e0b',
            cyan: '#06b6d4'
          },
          fontFamily: { 'inter': ['Inter', 'sans-serif'] },
          animation: {
            'float': 'float 6s ease-in-out infinite',
            'pulse-slow': 'pulse 3s ease-in-out infinite',
            'slide-up': 'slideUp 0.5s ease-out',
            'fade-in': 'fadeIn 0.6s ease-out',
            'bounce-slow': 'bounce 2s infinite',
          },
          boxShadow: {
            'neumorphism': '20px 20px 60px #0d1522, -20px -20px 60px #111b32',
            'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.37)',
            'card-hover': '0 20px 40px -15px rgba(244, 63, 94, 0.3)',
          }
        }
      }
    }
  </script>

  <style>
    * { font-family: 'Inter', sans-serif; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    .sidebar {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 100;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
    .dark .sidebar { background: rgba(15, 23, 42, 0.95); }

    .active-icon {
      background: linear-gradient(135deg, #f43f5e, #8b5cf6) !important;
      transform: scale(1.1);
      box-shadow: 0 10px 25px -5px rgba(244, 63, 94, 0.5);
    }
    .active-text {
      color: #f43f5e !important;
      font-weight: 800 !important;
      background: linear-gradient(135deg, #f43f5e, #8b5cf6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .product-selected {
      border-color: #f43f5e !important;
      background: linear-gradient(135deg, rgba(244, 63, 94, 0.08), rgba(59, 130, 246, 0.05));
      box-shadow: 0 10px 30px -10px rgba(244, 63, 94, 0.25);
      transform: translateY(-2px);
    }

    .glass-card {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .dark .glass-card {
      background: rgba(30, 41, 59, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .btn-gradient {
      background: linear-gradient(135deg, #f43f5e, #8b5cf6, #3b82f6);
      background-size: 200% 200%;
      animation: gradient 3s ease infinite;
    }
    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .carousel-container {
      position: relative;
      overflow: hidden;
      border-radius: 2rem;
      perspective: 1000px;
    }
    .carousel-slide {
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0;
      transform: translateX(100%);
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .carousel-slide.active { opacity: 1; transform: translateX(0); }
    .carousel-slide.prev { transform: translateX(-100%); }
    .carousel-slide.next { transform: translateX(100%); }

    .carousel-dots {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
    }
    .carousel-dot {
      width: 10px; height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }
    .carousel-dot.active {
      width: 30px;
      border-radius: 10px;
      background: linear-gradient(90deg, #f43f5e, #8b5cf6);
      box-shadow: 0 0 15px rgba(244, 63, 94, 0.5);
    }

    .carousel-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.9);
      color: #f43f5e;
      width: 44px; height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 10;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    }
    .dark .carousel-nav { background: rgba(30, 41, 59, 0.9); }
    .carousel-container:hover .carousel-nav { opacity: 1; }
    .carousel-prev { left: 20px; transform: translateY(-50%) translateX(-10px); }
    .carousel-next { right: 20px; transform: translateY(-50%) translateX(10px); }
    .carousel-container:hover .carousel-prev { transform: translateY(-50%) translateX(0); }
    .carousel-container:hover .carousel-next { transform: translateY(-50%) translateX(0); }

    .popular-badge { background: linear-gradient(135deg, #f43f5e, #ec4899); animation: pulse-glow 2s infinite; }
    .recommend-badge { background: linear-gradient(135deg, #3b82f6, #06b6d4); }
    .best-badge { background: linear-gradient(135deg, #10b981, #84cc16); }

    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 0 0 rgba(244, 63, 94, 0.4); }
      70% { box-shadow: 0 0 0 15px rgba(244, 63, 94, 0); }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-15px) rotate(5deg); }
    }
    @keyframes slideUp {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    .logo-text {
      background: linear-gradient(135deg, #f43f5e, #8b5cf6, #3b82f6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 900;
    }

    .modern-input {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 2px solid rgba(244, 63, 94, 0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .modern-input:focus {
      border-color: #f43f5e;
      box-shadow: 0 0 0 3px rgba(244, 63, 94, 0.1);
    }

    .category-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .category-card:hover { transform: translateY(-5px) scale(1.05); }

    .product-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .product-card:hover { transform: translateY(-5px); }

    .modal { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    .modal-open { opacity: 1 !important; pointer-events: auto !important; }
    .modal-content-open { transform: scale(1) !important; opacity: 1 !important; }

    .stats-card {
      background: linear-gradient(135deg, rgba(244, 63, 94, 0.1), rgba(59, 130, 246, 0.05));
      border: 1px solid rgba(244, 63, 94, 0.1);
    }

    .progress-bar { height: 6px; border-radius: 3px; background: rgba(244, 63, 94, 0.1); overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #f43f5e, #8b5cf6); border-radius: 3px; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }

    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: rgba(244, 63, 94, 0.05); border-radius: 10px; }
    ::-webkit-scrollbar-thumb { background: linear-gradient(135deg, #f43f5e, #8b5cf6); border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: linear-gradient(135deg, #ec4899, #8b5cf6); }
  </style>
</head>

<body class="bg-gradient-to-br from-slate-50 to-blue-50 dark:from-gelap dark:to-slate-900 text-slate-800 dark:text-slate-200 max-w-md mx-auto min-h-screen relative font-inter">

  <!-- Sidebar -->
  <div id="sidebar" class="sidebar fixed top-0 left-0 h-full w-80 z-50 transform -translate-x-full shadow-2xl">
    <div class="p-6 h-full flex flex-col">
      <div class="flex items-center gap-4 mb-8">
        <div class="w-16 h-16 rounded-2xl overflow-hidden border-4 border-white dark:border-slate-800 shadow-xl floating-logo">
          <img src="https://files.catbox.moe/61sqej.png" alt="Logo Store" class="w-full h-full object-cover">
        </div>
        <div>
          <p class="font-black text-xl logo-text">Tangsky market</p>
          <p class="text-[11px] text-utama font-bold uppercase tracking-widest italic">Premium Digital Services</p>
          <div class="flex items-center gap-1 mt-1">
            <div class="w-1 h-1 rounded-full bg-utama animate-pulse"></div>
            <div class="w-1 h-1 rounded-full bg-sekunder animate-pulse delay-100"></div>
            <div class="w-1 h-1 rounded-full bg-hijau animate-pulse delay-200"></div>
            <p class="text-[9px] text-slate-400 ml-2">Online â€¢ Premium â€¢ Trusted</p>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-3 gap-3 mb-8">
        <div class="stats-card p-3 rounded-xl text-center">
          <p class="text-xs text-slate-500 dark:text-slate-400 mb-1">Products</p>
          <p class="font-black text-lg text-utama">45+</p>
        </div>
        <div class="stats-card p-3 rounded-xl text-center">
          <p class="text-xs text-slate-500 dark:text-slate-400 mb-1">Clients</p>
          <p class="font-black text-lg text-sekunder">500+</p>
        </div>
        <div class="stats-card p-3 rounded-xl text-center">
          <p class="text-xs text-slate-500 dark:text-slate-400 mb-1">Uptime</p>
          <p class="font-black text-lg text-hijau">99.9%</p>
        </div>
      </div>

      <div id="sidebar-menu" class="space-y-2 flex-1"></div>

      <div class="mt-8 pt-6 border-t border-slate-100 dark:border-slate-800">
        <div class="flex items-center gap-3 mb-4">
          <div class="w-10 h-10 rounded-full bg-gradient-to-r from-utama to-sekunder flex items-center justify-center">
            <i class="fas fa-user text-white text-sm"></i>
          </div>
          <div>
            <p class="font-bold text-sm">Guest User</p>
            <p class="text-[10px] text-slate-500">Select products to continue</p>
          </div>
        </div>
        <button onclick="toggleMenu()" class="w-full flex items-center justify-center gap-3 p-3 rounded-xl bg-gradient-to-r from-utama to-utama/80 text-white font-bold hover:shadow-lg hover:shadow-utama/30 transition-all active:scale-95">
          <i class="fas fa-times w-5"></i> Close Menu
        </button>
      </div>
    </div>
  </div>

  <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-40 hidden" onclick="toggleMenu()"></div>

  <!-- Nav -->
  <nav class="flex justify-between items-center p-5 sticky top-0 glass-card z-30">
    <div class="flex items-center gap-3">
      <button onclick="toggleMenu()" class="w-12 h-12 flex items-center justify-center rounded-xl bg-white/80 dark:bg-kartuGelap/80 shadow-lg hover:shadow-xl transition-all hover:scale-105 active:scale-95 group">
        <i class="fas fa-bars text-slate-600 dark:text-slate-300 group-hover:text-utama transition-colors"></i>
      </button>
      <div class="flex items-center gap-3 ml-2">
        <div class="w-10 h-10 rounded-xl overflow-hidden border-2 border-utama/30 shadow-lg">
          <img src="https://files.catbox.moe/61sqej.png" alt="Logo" class="w-full h-full object-cover">
        </div>
        <div>
          <p class="font-black text-sm logo-text leading-tight">Tangsky market</p>
          <div class="flex items-center gap-1">
            <div class="w-1 h-1 rounded-full bg-utama"></div>
            <p class="text-[8px] text-slate-400 uppercase tracking-wider">Digital Market</p>
          </div>
        </div>
      </div>
    </div>
    <div class="flex items-center gap-2">
      <button onclick="toggleCart()" class="w-12 h-12 flex items-center justify-center rounded-xl bg-white/80 dark:bg-kartuGelap/80 text-utama shadow-lg relative hover:shadow-xl hover:scale-105 transition-all active:scale-95 group">
        <i class="fas fa-shopping-cart group-hover:animate-bounce-slow"></i>
        <span id="cart-count" class="absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-utama to-utama/80 text-white text-[10px] rounded-full flex items-center justify-center font-black">0</span>
      </button>
      <button onclick="changeTheme()" class="w-12 h-12 flex items-center justify-center rounded-xl bg-white/80 dark:bg-kartuGelap/80 text-yellow-500 shadow-lg hover:shadow-xl hover:rotate-180 transition-all active:scale-95">
        <i id="theme-icon" class="fas fa-sun"></i>
      </button>
    </div>
  </nav>

  <!-- Carousel -->
  <div class="px-5 mt-5 mb-6">
    <div class="carousel-container w-full h-48 rounded-3xl overflow-hidden shadow-2xl relative">
      <div class="carousel-slide active">
        <div class="relative w-full h-full bg-gradient-to-br from-utama/30 via-utama/10 to-sekunder/20">
          <img src="https://files.catbox.moe/v6gbdq.png" class="w-full h-full object-cover">
          <div class="absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"></div>
        </div>
      </div>

      <div class="carousel-slide">
        <div class="relative w-full h-full bg-gradient-to-br from-sekunder/30 via-hijau/10 to-utama/20">
          <img src="https://files.catbox.moe/61sqej.png" class="w-full h-full object-cover">
          <div class="absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"></div>
        </div>
      </div>

      <div class="carousel-slide">
        <div class="relative w-full h-full bg-gradient-to-br from-hijau/30 via-sekunder/10 to-utama/20">
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-center p-6">
              <div class="w-20 h-20 rounded-full bg-gradient-to-r from-utama/20 to-sekunder/20 flex items-center justify-center mx-auto mb-4 border-4 border-utama/30 shadow-2xl">
                <i class="fas fa-headset text-utama text-3xl"></i>
              </div>
              <p class="font-black text-white text-lg mb-2">24/7 Customer Support</p>
              <p class="text-white/90 text-xs font-medium mb-3">Fast Response â€¢ Professional Team</p>
              <div class="progress-bar w-48 mx-auto"><div class="progress-fill w-full"></div></div>
            </div>
          </div>
          <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"></div>
        </div>
      </div>

      <div class="carousel-prev carousel-nav" onclick="prevSlide()">
        <i class="fas fa-chevron-left text-sm"></i>
      </div>
      <div class="carousel-next carousel-nav" onclick="nextSlide()">
        <i class="fas fa-chevron-right text-sm"></i>
      </div>

      <div class="carousel-dots">
        <span class="carousel-dot active" onclick="goToSlide(0)"></span>
        <span class="carousel-dot" onclick="goToSlide(1)"></span>
        <span class="carousel-dot" onclick="goToSlide(2)"></span>
      </div>
    </div>
  </div>

  <!-- Categories -->
  <div class="px-5 mb-5">
    <div class="flex justify-between items-center mb-4">
      <h2 class="font-black text-sm uppercase tracking-[0.2em] text-slate-700 dark:text-slate-300 flex items-center gap-2">
        <i class="fas fa-layer-group text-utama"></i>
        Kategori Layanan
      </h2>
      <span class="text-[10px] text-slate-500 font-bold bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full">Pilih Kategori</span>
    </div>
    <div class="flex gap-3 overflow-x-auto no-scrollbar pb-2" id="category-list"></div>
  </div>

  <!-- Quick cards -->
  <div class="px-5 mb-6 grid grid-cols-2 gap-3">
    <button onclick="bukaModal('benefit')" class="glass-card p-4 rounded-2xl flex items-center justify-between shadow-lg hover:shadow-xl active:scale-95 transition-all group">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-utama/20 to-sekunder/20 flex items-center justify-center text-utama shadow-inner group-hover:scale-110 transition-transform">
          <i class="fas fa-star"></i>
        </div>
        <div>
          <span class="text-xs font-black uppercase tracking-wider block">Benefits</span>
          <span class="text-[10px] text-slate-500">Check details</span>
        </div>
      </div>
      <i class="fas fa-chevron-right text-xs text-slate-400 group-hover:text-utama group-hover:translate-x-1 transition-all"></i>
    </button>

    <div class="glass-card p-4 rounded-2xl flex items-center justify-between shadow-lg">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-hijau/20 to-cyan/20 flex items-center justify-center text-hijau shadow-inner">
          <i class="fas fa-shield-alt"></i>
        </div>
        <div>
          <span class="text-xs font-black uppercase tracking-wider block">Secure</span>
          <span class="text-[10px] text-slate-500">SSL Protected</span>
        </div>
      </div>
      <i class="fas fa-check text-xs text-hijau"></i>
    </div>
  </div>

  <!-- Products -->
  <div class="px-5 mb-10">
    <div class="glass-card p-6 rounded-3xl shadow-2xl">
      <div id="dynamic-inputs" class="mb-6 space-y-4"></div>

      <div class="flex justify-between items-center mb-5">
        <div>
          <h3 class="font-black text-base flex items-center gap-2 mb-1">
            <i class="fas fa-shopping-bag text-utama"></i>
            <span id="judul-produk">Pilih Paket</span>
          </h3>
          <p class="text-[10px] text-slate-500">Select your preferred package</p>
        </div>
        <div class="text-right">
          <span id="selected-count" class="text-xs font-black text-utama block">0 dipilih</span>
          <span class="text-[10px] text-slate-500">Total items</span>
        </div>
      </div>

      <div id="grid-produk" class="space-y-3 max-h-[400px] overflow-y-auto pr-2"></div>

      <div class="flex gap-3 mt-8">
        <button onclick="openCheckoutModal()" class="flex-1 btn-gradient text-white py-4 rounded-2xl font-black text-xs uppercase tracking-wider shadow-xl hover:shadow-2xl active:scale-95 transition-all">
          Checkout Now
        </button>
        <button onclick="resetSelection()" class="w-12 glass-card text-slate-500 py-4 rounded-2xl font-black text-xs uppercase tracking-wider active:scale-95 transition-all hover:text-utama">
          <i class="fas fa-redo"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Benefit -->
  <div id="modal-benefit" class="modal fixed inset-0 z-[60] flex items-center justify-center px-5 opacity-0 pointer-events-none">
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="tutupModal('benefit')"></div>
    <div id="modal-benefit-content" class="relative glass-card w-full max-h-[80vh] rounded-3xl p-8 shadow-2xl transform scale-90 opacity-0 transition-all duration-300 overflow-y-auto">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h3 class="font-black text-xl uppercase tracking-tighter text-utama">Detail Benefit</h3>
          <p class="text-[10px] text-slate-500 mt-1">All benefits for selected service</p>
        </div>
        <button onclick="tutupModal('benefit')" class="w-10 h-10 flex items-center justify-center rounded-xl bg-slate-100 dark:bg-gelap text-slate-400 hover:text-utama hover:rotate-90 transition-all">
          <i class="fas fa-times text-sm"></i>
        </button>
      </div>
      <div id="isi-keuntungan" class="text-sm leading-relaxed font-medium text-slate-700 dark:text-slate-300 space-y-3"></div>
      <button onclick="tutupModal('benefit')" class="w-full mt-8 py-4 rounded-2xl btn-gradient text-white font-black text-xs uppercase tracking-wider shadow-lg shadow-utama/20 active:scale-95 transition-all">
        Oke, Saya Paham
      </button>
    </div>
  </div>

  <!-- Modal Checkout -->
  <div id="modal-checkout" class="modal fixed inset-0 z-[60] flex items-center justify-center px-5 opacity-0 pointer-events-none">
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="tutupModal('checkout')"></div>
    <div id="modal-checkout-content" class="relative glass-card w-full rounded-3xl p-8 shadow-2xl transform scale-90 opacity-0 transition-all duration-300">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h3 class="font-black text-xl uppercase tracking-tighter text-utama">Checkout</h3>
          <p class="text-[10px] text-slate-500 mt-1">Select payment method</p>
        </div>
        <button onclick="tutupModal('checkout')" class="w-10 h-10 flex items-center justify-center rounded-xl bg-slate-100 dark:bg-gelap text-slate-400 hover:text-utama hover:rotate-90 transition-all">
          <i class="fas fa-times text-sm"></i>
        </button>
      </div>
      <div id="checkout-details" class="mb-6 p-5 bg-slate-50 dark:bg-gelap rounded-2xl text-sm space-y-3"></div>
      <div class="space-y-3">
        <button onclick="checkoutWA()" class="w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-black text-xs uppercase tracking-wider shadow-lg hover:shadow-xl transition-all active:scale-95 group">
          <i class="fab fa-whatsapp mr-2 group-hover:scale-110 transition-transform"></i> WhatsApp (6281235980179)
        </button>
        <button onclick="checkoutTelegram()" class="w-full py-4 rounded-2xl bg-gradient-to-r from-blue-500 to-blue-600 text-white font-black text-xs uppercase tracking-wider shadow-lg hover:shadow-xl transition-all active:scale-95 group">
          <i class="fab fa-telegram mr-2 group-hover:scale-110 transition-transform"></i> Telegram (@kynastore21)
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Cart -->
  <div id="modal-cart" class="modal fixed inset-0 z-[60] flex items-center justify-center px-5 opacity-0 pointer-events-none">
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="tutupModal('cart')"></div>
    <div id="modal-cart-content" class="relative glass-card w-full h-[80vh] rounded-3xl p-8 shadow-2xl transform scale-90 opacity-0 transition-all duration-300 flex flex-col">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h3 class="font-black text-xl uppercase tracking-tighter text-utama">Keranjang Belanja</h3>
          <p class="text-[10px] text-slate-500 mt-1">Your selected items</p>
        </div>
        <button onclick="tutupModal('cart')" class="w-10 h-10 flex items-center justify-center rounded-xl bg-slate-100 dark:bg-gelap text-slate-400 hover:text-utama hover:rotate-90 transition-all">
          <i class="fas fa-times text-sm"></i>
        </button>
      </div>

      <div id="cart-items" class="flex-1 overflow-y-auto space-y-3 pr-2 mb-4"></div>
      <div id="cart-total" class="text-center font-black text-xl text-utama mb-4"></div>

      <button onclick="openCheckoutModal()" class="w-full py-4 rounded-2xl btn-gradient text-white font-black text-xs uppercase tracking-wider shadow-lg shadow-utama/20 active:scale-95 transition-all">
        Checkout Sekarang
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="p-10 text-center glass-card border-t border-slate-100 dark:border-slate-800/50">
    <div class="w-20 h-20 rounded-2xl overflow-hidden border-4 border-white dark:border-slate-800 mx-auto mb-4 shadow-xl">
      <img src="https://files.catbox.moe/61sqej.png" alt="Logo" class="w-full h-full object-cover">
    </div>
    <p class="text-utama font-black text-xl mb-2 tracking-tighter logo-text">Tangsky market</p>
    <p class="text-xs text-slate-400 uppercase tracking-widest font-bold mb-3">PREMIUM DIGITAL SERVICES</p>
    <p class="text-sm text-slate-600 dark:text-slate-400 mb-6 max-w-xs mx-auto">
      Provider layanan digital terpercaya dengan performa tinggi dan support 24/7.
    </p>

    <div class="flex justify-center gap-4 mb-6">
      <a href="https://wa.me/6281235980179" class="w-12 h-12 rounded-xl bg-gradient-to-r from-green-500 to-green-600 flex items-center justify-center text-white hover:shadow-lg hover:shadow-green-500/30 transition-all">
        <i class="fab fa-whatsapp text-lg"></i>
      </a>
      <a href="https://t.me/kynastore21" class="w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center text-white hover:shadow-lg hover:shadow-blue-500/30 transition-all">
        <i class="fab fa-telegram text-lg"></i>
      </a>
      <a href="https://instagram.com/_autin.kynaa" class="w-12 h-12 rounded-xl bg-gradient-to-r from-utama to-utama/80 flex items-center justify-center text-white hover:shadow-lg hover:shadow-utama/30 transition-all">
        <i class="fab fa-instagram text-lg"></i>
      </a>
    </div>

    <div class="grid grid-cols-3 gap-4 text-center mb-6">
      <div><p class="text-xs font-black text-slate-700 dark:text-slate-300">99.9%</p><p class="text-[10px] text-slate-500">Uptime</p></div>
      <div><p class="text-xs font-black text-slate-700 dark:text-slate-300">24/7</p><p class="text-[10px] text-slate-500">Support</p></div>
      <div><p class="text-xs font-black text-slate-700 dark:text-slate-300">Secure</p><p class="text-[10px] text-slate-500">SSL</p></div>
    </div>

    <p class="text-[10px] text-slate-500">Â© 2024 Tangsky market. All rights reserved.</p>
  </footer>

  <script>
    const WA_NUMBER = "6281235980179";
    const TELEGRAM_USER = "kynastore21";

    let currentSlide = 0;
    let slideInterval;

    // ===== DATABASE: APP PREMIUM (HARGA DEFAULT 0) =====
    const database = {
      netflix: {
        name: "Netflix",
        icon: "fas fa-film",
        keuntungan: "âœ¨ <b>KEUNTUNGAN NETFLIX:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: [
          { id: "contact", label: "Kontak (WA/Telegram)", type: "text", placeholder: "Contoh: @username / 628xx" }
        ],
        packages: [
          { id: "nf-1u1d", name: "1u1d", price: 3.000, specs: [{ icon: "fa-clock", text: "Durasi: 1 hari" }, { icon: "fa-user", text: "Slot: 1 user" }] },
          { id: "nf-2u1d", name: "2u1d", price: 2.000, specs: [{ icon: "fa-clock", text: "Durasi: 1 hari" }, { icon: "fa-user-friends", text: "Slot: 2 user" }] },
          { id: "nf-1u7d", name: "1u7d", price: 10.000, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }, { icon: "fa-user", text: "Slot: 1 user" }] },
          { id: "nf-2u7d", name: "2u7d", price: 9.000, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }, { icon: "fa-user-friends", text: "Slot: 2 user" }] },
          { id: "nf-1u1b", name: "1u1b", price: 23.000, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }, { icon: "fa-user", text: "Slot: 1 user" }] },
          { id: "nf-2u1b", name: "2u1b", price: 15.000, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }, { icon: "fa-user-friends", text: "Slot: 2 user" }] },
          { id: "nf-semipriv", name: "Semipriv", price: 27.000, badge: "recommend", specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }, { icon: "fa-user-friends", text: "Slot: Private" }] },
        ]
      },

      other: {
        name: "Other Apps",
        icon: "fas fa-layer-group",
        keuntungan: "âœ¨ <b>OTHER APPS:</b><br><br>âœ… Banyak pilihan app<br>âœ… Proses cepat<br>âœ… Support 24/7",
        inputs: [
          { id: "contact", label: "Kontak (WA/Telegram)", type: "text", placeholder: "Contoh: @username / 628xx" }
        ],
        packages: [
          { id: "ot-wink-7h", name: "Wink 7h", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }] },
          { id: "ot-viu-1y", name: "VIU 1y", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 tahun" }] },
          { id: "ot-viu-life", name: "VIU Lifetime", price: 0, badge: "best", specs: [{ icon: "fa-infinity", text: "Durasi: Lifetime" }] },
          { id: "ot-vidio-tv", name: "Vidio TV", price: 0, specs: [{ icon: "fa-tv", text: "Tipe: TV" }] },
          { id: "ot-meitu", name: "Meitu", price: 0, specs: [{ icon: "fa-camera", text: "Edit" }] },
          { id: "ot-zoom", name: "Zoom", price: 0, specs: [{ icon: "fa-video", text: "Meeting" }] },

          { id: "ot-bstation-7h", name: "Bstation 7h", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }] },
          { id: "ot-bstation-1b", name: "Bstation 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },

          { id: "ot-cc-7d", name: "CC 7d", price: 0, specs: [{ icon: "fa-credit-card", text: "Durasi: 7 hari" }] },
          { id: "ot-cc-24d", name: "CC 24d", price: 0, specs: [{ icon: "fa-credit-card", text: "Durasi: 24 hari" }] },
          { id: "ot-cc-35d", name: "CC 35d", price: 0, specs: [{ icon: "fa-credit-card", text: "Durasi: 35 hari" }] },

          { id: "ot-yt-famp-1b", name: "YT FAMP 1b", price: 0, specs: [{ icon: "fa-youtube", text: "Durasi: 1 bulan" }] },
          { id: "ot-yt-indp-1b", name: "YT INDP 1b", price: 0, specs: [{ icon: "fa-youtube", text: "Durasi: 1 bulan" }] },
          { id: "ot-yt-famhead-1b", name: "YT FAMHEAD 1b", price: 0, badge: "popular", specs: [{ icon: "fa-youtube", text: "Durasi: 1 bulan" }] },

          { id: "ot-prime-1b", name: "Prime Video 1b", price: 0, specs: [{ icon: "fa-play", text: "Durasi: 1 bulan" }] },

          { id: "ot-picsart-7h", name: "Picsart 7h", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }] },
          { id: "ot-picsart-1b", name: "Picsart 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },

          { id: "ot-meitu-7d", name: "Meitu 7d", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }] },
          { id: "ot-youku-1b", name: "Youku 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "ot-wetv-1b", name: "WeTV 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },

          { id: "ot-canva-1b", name: "Canva 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "ot-canva-1y", name: "Canva 1y", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 tahun" }] },
          { id: "ot-canva-design-1b", name: "Canva Design 1b", price: 0, specs: [{ icon: "fa-pen-nib", text: "Tipe: Design" }, { icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "ot-canva-life", name: "Canva Lifetime", price: 0, badge: "best", specs: [{ icon: "fa-infinity", text: "Durasi: Lifetime" }] },
          { id: "ot-canva-adm-1b", name: "Canva Adm 1b", price: 0, specs: [{ icon: "fa-user-shield", text: "Tipe: Admin" }, { icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "ot-canva-head-1b", name: "Canva Head 1b", price: 0, specs: [{ icon: "fa-crown", text: "Tipe: Head" }, { icon: "fa-calendar", text: "Durasi: 1 bulan" }] },

          { id: "ot-iqiyi-std-1b", name: "iQIYI STD 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "ot-iqiyi-prem-1b", name: "iQIYI PREM 1b", price: 0, specs: [{ icon: "fa-gem", text: "Tipe: Premium" }, { icon: "fa-calendar", text: "Durasi: 1 bulan" }] },

          { id: "ot-wibuku-1b", name: "Wibuku 1b", price: 0, specs: [{ icon: "fa-book", text: "Durasi: 1 bulan" }] }
        ]
      },

      canva: {
        name: "Canva",
        icon: "fas fa-palette",
        keuntungan: "âœ¨ <b>CANVA:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "cv-1b", name: "Canva 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "cv-1y", name: "Canva 1y", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 tahun" }] },
          { id: "cv-design-1b", name: "Canva Design 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "cv-life", name: "Canva Lifetime", price: 0, badge: "best", specs: [{ icon: "fa-infinity", text: "Durasi: Lifetime" }] },
          { id: "cv-adm-1b", name: "Canva Admin 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "cv-head-1b", name: "Canva Head 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] }
        ]
      },

      youtube: {
        name: "YouTube",
        icon: "fab fa-youtube",
        keuntungan: "âœ¨ <b>YOUTUBE:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "yt-famp-1b", name: "YT FAMP 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "yt-indp-1b", name: "YT INDP 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "yt-famhead-1b", name: "YT FAMHEAD 1b", price: 0, badge: "popular", specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] }
        ]
      },

      iqiyi: {
        name: "iQIYI",
        icon: "fas fa-tv",
        keuntungan: "âœ¨ <b>IQIYI:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "iq-std-1b", name: "iQIYI STD 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] },
          { id: "iq-prem-1b", name: "iQIYI PREM 1b", price: 0, badge: "recommend", specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] }
        ]
      },

      viu: {
        name: "VIU",
        icon: "fas fa-play-circle",
        keuntungan: "âœ¨ <b>VIU:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "viu-1y", name: "VIU 1y", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 tahun" }] },
          { id: "viu-life", name: "VIU Lifetime", price: 0, badge: "best", specs: [{ icon: "fa-infinity", text: "Durasi: Lifetime" }] }
        ]
      },

      prime: {
        name: "Prime Video",
        icon: "fas fa-clapperboard",
        keuntungan: "âœ¨ <b>PRIME VIDEO:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "prime-1b", name: "Prime Video 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] }
        ]
      },

      wetv: {
        name: "WeTV",
        icon: "fas fa-video",
        keuntungan: "âœ¨ <b>WETV:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "wetv-1b", name: "WeTV 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] }
        ]
      },

      youku: {
        name: "Youku",
        icon: "fas fa-play",
        keuntungan: "âœ¨ <b>YOUKU:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "youku-1b", name: "Youku 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] }
        ]
      },

      picsart: {
        name: "Picsart",
        icon: "fas fa-image",
        keuntungan: "âœ¨ <b>PICSART:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "picsart-7h", name: "Picsart 7h", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }] },
          { id: "picsart-1b", name: "Picsart 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] }
        ]
      },

      meitu: {
        name: "Meitu",
        icon: "fas fa-camera-retro",
        keuntungan: "âœ¨ <b>MEITU:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "meitu-7d", name: "Meitu 7d", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }] },
          { id: "meitu-other", name: "Meitu (Lainnya)", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: - (isi nanti)" }] }
        ]
      },

      zoom: {
        name: "Zoom",
        icon: "fas fa-video",
        keuntungan: "âœ¨ <b>ZOOM:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "zoom", name: "Zoom", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: - (isi nanti)" }] }
        ]
      },

      vidio: {
        name: "Vidio",
        icon: "fas fa-tv",
        keuntungan: "âœ¨ <b>VIDIO:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "vidio-tv", name: "Vidio TV", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: - (isi nanti)" }] }
        ]
      },

      bstation: {
        name: "Bstation",
        icon: "fas fa-compact-disc",
        keuntungan: "âœ¨ <b>BSTATION:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "bst-7h", name: "Bstation 7h", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }] },
          { id: "bst-1b", name: "Bstation 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] }
        ]
      },

      cc: {
        name: "CC",
        icon: "fas fa-credit-card",
        keuntungan: "âœ¨ <b>CC:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "cc-7d", name: "CC 7d", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }] },
          { id: "cc-24d", name: "CC 24d", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 24 hari" }] },
          { id: "cc-35d", name: "CC 35d", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 35 hari" }] }
        ]
      },

      wink: {
        name: "Wink",
        icon: "fas fa-wand-magic-sparkles",
        keuntungan: "âœ¨ <b>WINK:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "wink-7h", name: "Wink 7h", price: 0, specs: [{ icon: "fa-clock", text: "Durasi: 7 hari" }] }
        ]
      },

      wibuku: {
        name: "Wibuku",
        icon: "fas fa-book",
        keuntungan: "âœ¨ <b>WIBUKU:</b><br><br>âœ… Proses cepat<br>âœ… Support 24/7<br>âœ… Aman & trusted",
        inputs: commonInputs,
        packages: [
          { id: "wibuku-1b", name: "Wibuku 1b", price: 0, specs: [{ icon: "fa-calendar", text: "Durasi: 1 bulan" }] }
        ]
      }
    };

    const sidebarLinks = [
      { name: "Instagram", icon: "fab fa-instagram", link: "https://instagram.com/_autin.kynaa", color: "text-utama" },
      { name: "WhatsApp", icon: "fab fa-whatsapp", link: `https://wa.me/${WA_NUMBER}`, color: "text-green-500" },
      { name: "Telegram", icon: "fab fa-telegram", link: `https://t.me/${TELEGRAM_USER}`, color: "text-blue-500" }
    ];

    let selectedProducts = [];
    let activeCategory = 'netflix';
    let cart = [];

    // ===== Carousel =====
    function initCarousel() {
      const slides = document.querySelectorAll('.carousel-slide');
      const dots = document.querySelectorAll('.carousel-dot');

      slides.forEach((slide, index) => {
        if (index === currentSlide) {
          slide.classList.add('active');
          slide.style.opacity = '1';
          slide.style.transform = 'translateX(0)';
        } else if (index < currentSlide) {
          slide.classList.remove('active');
          slide.style.opacity = '0';
          slide.style.transform = 'translateX(-100%)';
        } else {
          slide.classList.remove('active');
          slide.style.opacity = '0';
          slide.style.transform = 'translateX(100%)';
        }
      });

      dots.forEach((dot, index) => dot.classList.toggle('active', index === currentSlide));
    }

    function nextSlide() {
      const slides = document.querySelectorAll('.carousel-slide');
      const dots = document.querySelectorAll('.carousel-dot');

      slides[currentSlide].classList.remove('active');
      slides[currentSlide].style.opacity = '0';
      slides[currentSlide].style.transform = 'translateX(-100%)';
      dots[currentSlide].classList.remove('active');

      currentSlide = (currentSlide + 1) % slides.length;

      slides[currentSlide].classList.add('active');
      slides[currentSlide].style.opacity = '1';
      slides[currentSlide].style.transform = 'translateX(0)';
      dots[currentSlide].classList.add('active');

      resetCarouselInterval();
    }

    function prevSlide() {
      const slides = document.querySelectorAll('.carousel-slide');
      const dots = document.querySelectorAll('.carousel-dot');

      slides[currentSlide].classList.remove('active');
      slides[currentSlide].style.opacity = '0';
      slides[currentSlide].style.transform = 'translateX(100%)';
      dots[currentSlide].classList.remove('active');

      currentSlide = (currentSlide - 1 + slides.length) % slides.length;

      slides[currentSlide].classList.add('active');
      slides[currentSlide].style.opacity = '1';
      slides[currentSlide].style.transform = 'translateX(0)';
      dots[currentSlide].classList.add('active');

      resetCarouselInterval();
    }

    function goToSlide(index) {
      const slides = document.querySelectorAll('.carousel-slide');
      const dots = document.querySelectorAll('.carousel-dot');

      slides[currentSlide].classList.remove('active');
      slides[currentSlide].style.opacity = '0';
      slides[currentSlide].style.transform = (index > currentSlide) ? 'translateX(-100%)' : 'translateX(100%)';
      dots[currentSlide].classList.remove('active');

      currentSlide = index;

      slides[currentSlide].classList.add('active');
      slides[currentSlide].style.opacity = '1';
      slides[currentSlide].style.transform = 'translateX(0)';
      dots[currentSlide].classList.add('active');

      resetCarouselInterval();
    }

    function startCarousel() { slideInterval = setInterval(nextSlide, 5000); }
    function resetCarouselInterval() { clearInterval(slideInterval); startCarousel(); }

    // ===== Store Render =====
    function renderSidebar() {
      document.getElementById('sidebar-menu').innerHTML = sidebarLinks.map(item => `
        <a href="${item.link}" target="_blank" class="flex items-center gap-4 p-4 rounded-2xl font-semibold hover:bg-slate-100 dark:hover:bg-slate-800/50 transition-all duration-300 slide-in group">
          <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-utama/10 to-sekunder/10 flex items-center justify-center group-hover:scale-110 transition-transform">
            <i class="${item.icon} text-lg ${item.color}"></i>
          </div>
          <span class="text-sm flex-1">${item.name}</span>
          <i class="fas fa-arrow-right text-xs text-slate-400 group-hover:text-utama group-hover:translate-x-1 transition-all"></i>
        </a>
      `).join('');
    }

    function renderCategories() {
      const container = document.getElementById('category-list');
      container.innerHTML = Object.keys(database).map(key => `
        <button onclick="pilihKategori('${key}')" id="btn-${key}" class="category-btn group flex flex-col items-center justify-center min-w-[90px] p-3 rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-kartuGelap hover:border-utama hover:shadow-md transition-all duration-300">
          <i id="icon-${key}" class="${database[key].icon} text-xl mb-2 text-slate-400 group-hover:text-utama transition-colors"></i>
          <span id="text-${key}" class="text-[10px] font-bold text-slate-500 group-hover:text-slate-700 dark:group-hover:text-slate-200 transition-colors text-center leading-tight">${database[key].name}</span>
        </button>
      `).join('');
    }

    function pilihKategori(key) {
      activeCategory = key;

      Object.keys(database).forEach(k => {
        const btn = document.getElementById(`btn-${k}`);
        const icon = document.getElementById(`icon-${k}`);
        const text = document.getElementById(`text-${k}`);

        btn.className = "category-btn group flex flex-col items-center justify-center min-w-[90px] h-[90px] p-2 rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-kartuGelap hover:border-utama hover:shadow-lg transition-all duration-300 active:scale-95";
        icon.className = `${database[k].icon} text-2xl mb-2 text-slate-400 group-hover:text-utama transition-colors`;
        text.className = "text-[10px] font-bold text-slate-500 group-hover:text-slate-700 dark:group-hover:text-slate-300 transition-colors text-center leading-tight";
      });

      const activeBtn = document.getElementById(`btn-${key}`);
      const activeIcon = document.getElementById(`icon-${key}`);
      const activeText = document.getElementById(`text-${key}`);

      if (activeBtn) {
        activeBtn.className = "category-btn group flex flex-col items-center justify-center min-w-[90px] h-[90px] p-2 rounded-2xl bg-gradient-to-br from-utama to-sekunder shadow-lg shadow-utama/30 transform scale-105 transition-all duration-300";
        activeIcon.className = `${database[key].icon} text-2xl mb-2 text-white transition-colors`;
        activeText.className = "text-[10px] font-black text-white text-center leading-tight";
      }

      document.getElementById('judul-produk').innerText = database[key].name.toUpperCase();

      const inputContainer = document.getElementById('dynamic-inputs');
      inputContainer.innerHTML = database[key].inputs.map(inp => `
        <div class="animate-slide-up">
          <label class="text-xs font-black uppercase text-slate-400 ml-1 mb-2 block">${inp.label}</label>
          <input type="${inp.type}" id="input-${inp.id}" placeholder="${inp.placeholder}" class="modern-input w-full p-4 rounded-2xl focus:outline-none text-sm font-medium transition-all duration-300">
        </div>
      `).join('');

      const grid = document.getElementById('grid-produk');
      const sortedPackages = [...database[key].packages].sort((a, b) => (a.price || 0) - (b.price || 0));

        grid.innerHTML = sortedPackages.map(item => {
        const isSelected = selectedProducts.includes(item.id);
        const badge = item.badge ?
          `<span class="${item.badge === 'popular' ? 'popular-badge' : item.badge === 'recommend' ? 'recommend-badge' : 'best-badge'} text-[9px] text-white px-3 py-1.5 rounded-full font-black absolute -top-2 -right-2 z-10 shadow-lg">
            ${item.badge === 'popular' ? 'ðŸ”¥ POPULAR' : item.badge === 'recommend' ? 'ðŸ‘‘ RECOMMEND' : 'ðŸ’Ž BEST'}
          </span>` : '';

        return `
          <div onclick="selectItem('${item.id}', this)" class="product-card relative bg-white dark:bg-kartuGelap/50 p-5 rounded-3xl border-2 ${isSelected ? 'border-utama product-selected' : 'border-transparent'} transition-all duration-300 cursor-pointer shadow-lg hover:shadow-xl">
            ${badge}
            <div class="flex justify-between items-start mb-4">
              <p class="font-black text-xs uppercase flex-1 pr-3">${item.name}</p>
              <div class="text-utama font-black text-lg">Rp ${Number(item.price || 0).toLocaleString()}</div>
            </div>
            <div class="grid grid-cols-2 gap-3">
              ${item.specs.map(spec => `
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 rounded-xl bg-gradient-to-r from-utama/10 to-sekunder/10 flex items-center justify-center shadow-inner">
                    <i class="fas ${spec.icon} text-xs text-utama"></i>
                  </div>
                  <span class="text-[10px] font-bold text-slate-700 dark:text-slate-300 flex-1">${spec.text}</span>
                </div>
              `).join('')}
            </div>
            ${isSelected ? `
              <div class="mt-4 text-center">
                <span class="text-xs text-utama font-black flex items-center justify-center gap-2"><i class="fas fa-check-circle"></i> Dipilih</span>
              </div>
            ` : ''}
          </div>
        `;
      }).join('');

      updateSelectedCount();
      // refresh cart list (biar kategori pindah tetep aman)
      rebuildCartFromSelected();
      updateCartCount();
      updateCartDisplay();
    }

    function findProductById(id) {
      for (const catKey of Object.keys(database)) {
        const cat = database[catKey];
        const product = cat.packages.find(p => p.id === id);
        if (product) return { catKey, category: cat, product };
      }
      return null;
    }

    function rebuildCartFromSelected() {
      cart = selectedProducts.map(id => {
        const found = findProductById(id);
        if (!found) return null;
        return {
          category: found.category.name,
          name: found.product.name,
          price: Number(found.product.price || 0),
          id: found.product.id
        };
      }).filter(Boolean);
    }

    function selectItem(itemId, element) {
      const index = selectedProducts.indexOf(itemId);
      if (index === -1) {
        selectedProducts.push(itemId);
        element.classList.add('product-selected', 'border-utama');
        element.classList.remove('border-transparent');
      } else {
        selectedProducts.splice(index, 1);
        element.classList.remove('product-selected', 'border-utama');
        element.classList.add('border-transparent');
      }

      rebuildCartFromSelected();
      updateCartCount();
      updateSelectedCount();
      updateCartDisplay();
    }

    function updateSelectedCount() {
      document.getElementById('selected-count').textContent = `${selectedProducts.length} dipilih`;
    }

    function updateCartCount() {
      document.getElementById('cart-count').textContent = cart.length;
    }

    function updateCartDisplay() {
      const cartItems = document.getElementById('cart-items');
      const cartTotal = document.getElementById('cart-total');

      if (cart.length === 0) {
        cartItems.innerHTML = `
          <div class="text-center py-10 text-slate-400">
            <div class="w-20 h-20 rounded-full bg-gradient-to-r from-utama/10 to-sekunder/10 flex items-center justify-center mx-auto mb-4">
              <i class="fas fa-shopping-cart text-3xl text-utama"></i>
            </div>
            <p class="text-sm font-bold mb-1">Keranjang kosong</p>
            <p class="text-xs">Pilih produk terlebih dahulu</p>
          </div>
        `;
        cartTotal.textContent = '';
        return;
      }

      let total = 0;
      cartItems.innerHTML = cart.map(item => {
        total += Number(item.price || 0);
        return `
          <div class="flex justify-between items-center p-4 bg-slate-50 dark:bg-gelap/50 rounded-2xl slide-in border border-slate-100 dark:border-slate-800">
            <div class="flex-1">
              <p class="text-xs font-black uppercase">${item.name}</p>
              <p class="text-[10px] text-slate-500">${item.category}</p>
            </div>
            <div class="text-utama font-black text-base">Rp ${Number(item.price || 0).toLocaleString()}</div>
          </div>
        `;
      }).join('');

      cartTotal.textContent = `Total: Rp ${total.toLocaleString()}`;
    }

    function toggleCart() {
      updateCartDisplay();
      bukaModal('cart');
    }

    function resetSelection() {
      selectedProducts = [];
      cart = [];
      updateCartCount();
      updateSelectedCount();
      pilihKategori(activeCategory);
    }

    function bukaModal(type) {
      const modal = document.getElementById(`modal-${type}`);
      const content = document.getElementById(`modal-${type}-content`);

      if (type === 'benefit') {
        document.getElementById('isi-keuntungan').innerHTML = database[activeCategory].keuntungan;
      }

      modal.classList.add('modal-open');
      setTimeout(() => content.classList.add('modal-content-open'), 50);
    }

    function tutupModal(type) {
      const modal = document.getElementById(`modal-${type}`);
      const content = document.getElementById(`modal-${type}-content`);
      content.classList.remove('modal-content-open');
      setTimeout(() => modal.classList.remove('modal-open'), 300);
    }

    function openCheckoutModal() {
      if (selectedProducts.length === 0) {
        alert("Pilih produk dulu!");
        return;
      }

      let valid = true;
      database[activeCategory].inputs.forEach(inp => {
        const val = document.getElementById(`input-${inp.id}`).value;
        if (!val) valid = false;
      });

      if (!valid) {
        alert("Lengkapi semua data!");
        return;
      }

      const details = document.getElementById('checkout-details');
      let html = '<div class="font-black text-utama mb-3 text-sm">Pesanan Anda:</div>';

      cart.forEach(item => {
        html += `
          <div class="flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700/50 last:border-0">
            <span class="text-xs">${item.name}</span>
            <span class="text-xs font-bold text-utama">Rp ${Number(item.price || 0).toLocaleString()}</span>
          </div>
        `;
      });

      const total = cart.reduce((sum, item) => sum + Number(item.price || 0), 0);
      html += `
        <div class="flex justify-between items-center py-3 mt-2 border-t border-slate-200 dark:border-slate-700">
          <span class="text-sm font-black">Total</span>
          <span class="text-lg font-black text-utama">Rp ${total.toLocaleString()}</span>
        </div>
      `;

      html += '<div class="mt-4 pt-4 border-t border-slate-200 dark:border-slate-700">';
      database[activeCategory].inputs.forEach(inp => {
        const val = document.getElementById(`input-${inp.id}`).value;
        html += `<div class="text-xs mb-2"><span class="font-bold">${inp.label}:</span> ${val}</div>`;
      });
      html += '</div>';

      details.innerHTML = html;
      bukaModal('checkout');
    }

    function checkoutWA() {
      let message = `Halo Tangsky market, saya ingin membeli:\n\n`;

      cart.forEach(item => {
        message += `â€¢ ${item.name} - Rp ${Number(item.price || 0).toLocaleString()}\n`;
      });

      message += `\nKategori: ${database[activeCategory].name}\n`;

      database[activeCategory].inputs.forEach(inp => {
        const val = document.getElementById(`input-${inp.id}`).value;
        message += `${inp.label}: ${val}\n`;
      });

      const total = cart.reduce((sum, item) => sum + Number(item.price || 0), 0);
      message += `\nTotal: Rp ${total.toLocaleString()}`;

      const encodedMessage = encodeURIComponent(message);
      window.open(`https://wa.me/${WA_NUMBER}?text=${encodedMessage}`, '_blank');
    }

    function checkoutTelegram() {
      let message = `Halo @${TELEGRAM_USER}, saya ingin membeli:\n\n`;

      cart.forEach(item => {
        message += `â€¢ ${item.name} - Rp ${Number(item.price || 0).toLocaleString()}\n`;
      });

      message += `\nKategori: ${database[activeCategory].name}\n`;

      database[activeCategory].inputs.forEach(inp => {
        const val = document.getElementById(`input-${inp.id}`).value;
        message += `${inp.label}: ${val}\n`;
      });

      const total = cart.reduce((sum, item) => sum + Number(item.price || 0), 0);
      message += `\nTotal: Rp ${total.toLocaleString()}`;

      const encodedMessage = encodeURIComponent(message);
      window.open(`https://t.me/${TELEGRAM_USER}?text=${encodedMessage}`, '_blank');
    }

    function changeTheme() {
      const isDark = document.documentElement.classList.toggle('dark');
      document.getElementById('theme-icon').className = isDark ? 'fas fa-sun' : 'fas fa-moon';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    }

    function toggleMenu() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      const isOpen = sidebar.classList.contains('-translate-x-full');

      if (isOpen) {
        sidebar.classList.remove('-translate-x-full');
        overlay.classList.remove('hidden');
      } else {
        sidebar.classList.add('-translate-x-full');
        overlay.classList.add('hidden');
      }
    }

    window.onload = () => {
      if (localStorage.getItem('theme') === 'light') {
        document.documentElement.classList.remove('dark');
        document.getElementById('theme-icon').className = 'fas fa-moon';
      }

      initCarousel();
      startCarousel();
      renderSidebar();
      renderCategories();
      pilihKategori('netflix'); // default ke Netflix
      updateCartCount();

      // overlay tambahan (biar aman)
      const overlay = document.createElement('div');
      overlay.id = 'sidebar-overlay';
      overlay.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-40 hidden';
      overlay.onclick = toggleMenu;
      document.body.appendChild(overlay);
    };
  </script>
</body>
</html>